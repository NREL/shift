
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.3.9">
    
    
      
        <title>Synthetic Feeder, Chennai - Shift</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#generating-synthetic-feeder-using-openstreet-data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Shift" class="md-header__button md-logo" aria-label="Shift" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Shift
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Synthetic Feeder, Chennai
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/nrel/shift" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    nrel/shift
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Shift" class="md-nav__button md-logo" aria-label="Shift" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Shift
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/nrel/shift" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    nrel/shift
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Welcome
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Synthetic Feeder, Chennai
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Synthetic Feeder, Chennai
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#generating-synthetic-feeder-using-openstreet-data" class="md-nav__link">
    Generating synthetic feeder using OpenStreet data
  </a>
  
    <nav class="md-nav" aria-label="Generating synthetic feeder using OpenStreet data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-preparing-sandbox-environment" class="md-nav__link">
    1. Preparing sandbox environment 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-get-all-the-buildings-data-and-create-geometry-object-for-all-buildings" class="md-nav__link">
     2. Get all the buildings data and create geometry object for all buildings. 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-convert-building-geometries-into-load-objects" class="md-nav__link">
     3. Convert building geometries into load objects 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-use-clustering-algorithm-to-cluster-loads" class="md-nav__link">
     4. Use clustering algorithm to cluster loads 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-convert-cluster-center-into-distribution-transformer-objects" class="md-nav__link">
      5. Convert cluster center into distribution transformer objects 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-get-road-network-and-create-primary-network" class="md-nav__link">
     6. Get road network and create primary network 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-convert-primary-network-into-list-of-primary-line-sections" class="md-nav__link">
     7. Convert primary network into list of primary line sections 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-update-transformer-objects-to-use-nearest-primary-node-from-primary-network" class="md-nav__link">
     8. Update transformer objects to use nearest primary node from primary network 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-develop-secondary-network-and-line-sections-for-all-transformer-objects" class="md-nav__link">
      9. Develop secondary network and line sections for all transformer objects 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10-create-a-substation-transformer-object" class="md-nav__link">
     10. Create a substation transformer object 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#11-export-opendss-model" class="md-nav__link">
     11. Export OpenDSS model 
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../how-to-guides/" class="md-nav__link">
        How to Guides
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          References
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="References" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          References
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../geometry/" class="md-nav__link">
        geometry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../clustering/" class="md-nav__link">
        clustering
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/" class="md-nav__link">
        exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../facade/" class="md-nav__link">
        facade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feeder_network/" class="md-nav__link">
        feeder_network
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../graph/" class="md-nav__link">
        graph
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../line_section/" class="md-nav__link">
        line_section
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../load_builder/" class="md-nav__link">
        load_builder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../load/" class="md-nav__link">
        load
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../network_plots/" class="md-nav__link">
        network_plots
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../primary_network_builder/" class="md-nav__link">
        primary_network_builder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../secondary_network_builder/" class="md-nav__link">
        secondary_network_builder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../transformer_builder/" class="md-nav__link">
        transformer_builder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../transformer/" class="md-nav__link">
        transformer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../opendss/" class="md-nav__link">
        exporter.opendss
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../developers-guide/" class="md-nav__link">
        Guide to Developers
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#generating-synthetic-feeder-using-openstreet-data" class="md-nav__link">
    Generating synthetic feeder using OpenStreet data
  </a>
  
    <nav class="md-nav" aria-label="Generating synthetic feeder using OpenStreet data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-preparing-sandbox-environment" class="md-nav__link">
    1. Preparing sandbox environment 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-get-all-the-buildings-data-and-create-geometry-object-for-all-buildings" class="md-nav__link">
     2. Get all the buildings data and create geometry object for all buildings. 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-convert-building-geometries-into-load-objects" class="md-nav__link">
     3. Convert building geometries into load objects 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-use-clustering-algorithm-to-cluster-loads" class="md-nav__link">
     4. Use clustering algorithm to cluster loads 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-convert-cluster-center-into-distribution-transformer-objects" class="md-nav__link">
      5. Convert cluster center into distribution transformer objects 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-get-road-network-and-create-primary-network" class="md-nav__link">
     6. Get road network and create primary network 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-convert-primary-network-into-list-of-primary-line-sections" class="md-nav__link">
     7. Convert primary network into list of primary line sections 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-update-transformer-objects-to-use-nearest-primary-node-from-primary-network" class="md-nav__link">
     8. Update transformer objects to use nearest primary node from primary network 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-develop-secondary-network-and-line-sections-for-all-transformer-objects" class="md-nav__link">
      9. Develop secondary network and line sections for all transformer objects 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10-create-a-substation-transformer-object" class="md-nav__link">
     10. Create a substation transformer object 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#11-export-opendss-model" class="md-nav__link">
     11. Export OpenDSS model 
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/nrel/shift/edit/master/docs/chennai.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



  <h1>Synthetic Feeder, Chennai</h1>

<h2 id="generating-synthetic-feeder-using-openstreet-data">Generating synthetic feeder using OpenStreet data</h2>
<p><strong>Developed by: <a href="https://github.com/KapilDuwadi">Kapil Duwadi</a>, 2022-07-31</strong></p>
<p>In this tutorial you will build synthetic feeder for Chennai, India. 
You will perform following tasks to achieve final goal.</p>
<h3 id="1-preparing-sandbox-environment"><p style="color:green">1. Preparing sandbox environment </p></h3>
<p>To proceed with this tutorial, let's create a <code>sandbox</code> environment. 
It will take about a minute to make the environment ready.</p>
<p><a class="md-button md-button--primary" href="https://mybinder.org/v2/gh/NREL/shift/develop" target:_blank="target:_blank">Create a sandbox <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"/></svg></span></a></p>
<details>
<summary>Verify the screen you are seeing.</summary>
<p><img 300="300" alt="" src="../images/binder-snapshot.png" width:="width:" /></p>
</details>
<details open="open">
<summary>Creating your own environment (optional)</summary>
<p>If you encounter problem launching sandbox or prefer using jupyter notebook in 
your own computer please follow the following steps. In windows we recommend
using <code>Anaconda</code> or <code>Miniconda</code> to create the environment. </p>
<p>If you need help installing <code>Anaconda</code> please follow the instructions 
<a href="https://www.anaconda.com/products/distribution">here</a>. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m0 93.7 183.6-25.3v177.4H0V93.7zm0 324.6 183.6 25.3V268.4H0v149.9zm203.8 28L448 480V268.4H203.8v177.9zm0-380.6v180.1H448V32L203.8 65.7z"/></svg></span> Windows 10</label><label for="__tabbed_1_2"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M318.7 268.7c-.2-36.7 16.4-64.4 50-84.8-18.8-26.9-47.2-41.7-84.7-44.6-35.5-2.8-74.3 20.7-88.5 20.7-15 0-49.4-19.7-76.4-19.7C63.3 141.2 4 184.8 4 273.5q0 39.3 14.4 81.2c12.8 36.7 59 126.7 107.2 125.2 25.2-.6 43-17.9 75.8-17.9 31.8 0 48.3 17.9 76.4 17.9 48.6-.7 90.4-82.5 102.6-119.3-65.2-30.7-61.7-90-61.7-91.9zm-56.6-164.2c27.3-32.4 24.8-61.9 24-72.5-24.1 1.4-52 16.4-67.9 34.9-17.5 19.8-27.8 44.3-25.6 71.9 26.1 2 49.9-11.4 69.5-34.3z"/></svg></span> + <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M220.8 123.3c1 .5 1.8 1.7 3 1.7 1.1 0 2.8-.4 2.9-1.5.2-1.4-1.9-2.3-3.2-2.9-1.7-.7-3.9-1-5.5-.1-.4.2-.8.7-.6 1.1.3 1.3 2.3 1.1 3.4 1.7zm-21.9 1.7c1.2 0 2-1.2 3-1.7 1.1-.6 3.1-.4 3.5-1.6.2-.4-.2-.9-.6-1.1-1.6-.9-3.8-.6-5.5.1-1.3.6-3.4 1.5-3.2 2.9.1 1 1.8 1.5 2.8 1.4zM420 403.8c-3.6-4-5.3-11.6-7.2-19.7-1.8-8.1-3.9-16.8-10.5-22.4-1.3-1.1-2.6-2.1-4-2.9-1.3-.8-2.7-1.5-4.1-2 9.2-27.3 5.6-54.5-3.7-79.1-11.4-30.1-31.3-56.4-46.5-74.4-17.1-21.5-33.7-41.9-33.4-72C311.1 85.4 315.7.1 234.8 0 132.4-.2 158 103.4 156.9 135.2c-1.7 23.4-6.4 41.8-22.5 64.7-18.9 22.5-45.5 58.8-58.1 96.7-6 17.9-8.8 36.1-6.2 53.3-6.5 5.8-11.4 14.7-16.6 20.2-4.2 4.3-10.3 5.9-17 8.3s-14 6-18.5 14.5c-2.1 3.9-2.8 8.1-2.8 12.4 0 3.9.6 7.9 1.2 11.8 1.2 8.1 2.5 15.7.8 20.8-5.2 14.4-5.9 24.4-2.2 31.7 3.8 7.3 11.4 10.5 20.1 12.3 17.3 3.6 40.8 2.7 59.3 12.5 19.8 10.4 39.9 14.1 55.9 10.4 11.6-2.6 21.1-9.6 25.9-20.2 12.5-.1 26.3-5.4 48.3-6.6 14.9-1.2 33.6 5.3 55.1 4.1.6 2.3 1.4 4.6 2.5 6.7v.1c8.3 16.7 23.8 24.3 40.3 23 16.6-1.3 34.1-11 48.3-27.9 13.6-16.4 36-23.2 50.9-32.2 7.4-4.5 13.4-10.1 13.9-18.3.4-8.2-4.4-17.3-15.5-29.7zM223.7 87.3c9.8-22.2 34.2-21.8 44-.4 6.5 14.2 3.6 30.9-4.3 40.4-1.6-.8-5.9-2.6-12.6-4.9 1.1-1.2 3.1-2.7 3.9-4.6 4.8-11.8-.2-27-9.1-27.3-7.3-.5-13.9 10.8-11.8 23-4.1-2-9.4-3.5-13-4.4-1-6.9-.3-14.6 2.9-21.8zM183 75.8c10.1 0 20.8 14.2 19.1 33.5-3.5 1-7.1 2.5-10.2 4.6 1.2-8.9-3.3-20.1-9.6-19.6-8.4.7-9.8 21.2-1.8 28.1 1 .8 1.9-.2-5.9 5.5-15.6-14.6-10.5-52.1 8.4-52.1zm-13.6 60.7c6.2-4.6 13.6-10 14.1-10.5 4.7-4.4 13.5-14.2 27.9-14.2 7.1 0 15.6 2.3 25.9 8.9 6.3 4.1 11.3 4.4 22.6 9.3 8.4 3.5 13.7 9.7 10.5 18.2-2.6 7.1-11 14.4-22.7 18.1-11.1 3.6-19.8 16-38.2 14.9-3.9-.2-7-1-9.6-2.1-8-3.5-12.2-10.4-20-15-8.6-4.8-13.2-10.4-14.7-15.3-1.4-4.9 0-9 4.2-12.3zm3.3 334c-2.7 35.1-43.9 34.4-75.3 18-29.9-15.8-68.6-6.5-76.5-21.9-2.4-4.7-2.4-12.7 2.6-26.4v-.2c2.4-7.6.6-16-.6-23.9-1.2-7.8-1.8-15 .9-20 3.5-6.7 8.5-9.1 14.8-11.3 10.3-3.7 11.8-3.4 19.6-9.9 5.5-5.7 9.5-12.9 14.3-18 5.1-5.5 10-8.1 17.7-6.9 8.1 1.2 15.1 6.8 21.9 16l19.6 35.6c9.5 19.9 43.1 48.4 41 68.9zm-1.4-25.9c-4.1-6.6-9.6-13.6-14.4-19.6 7.1 0 14.2-2.2 16.7-8.9 2.3-6.2 0-14.9-7.4-24.9-13.5-18.2-38.3-32.5-38.3-32.5-13.5-8.4-21.1-18.7-24.6-29.9s-3-23.3-.3-35.2c5.2-22.9 18.6-45.2 27.2-59.2 2.3-1.7.8 3.2-8.7 20.8-8.5 16.1-24.4 53.3-2.6 82.4.6-20.7 5.5-41.8 13.8-61.5 12-27.4 37.3-74.9 39.3-112.7 1.1.8 4.6 3.2 6.2 4.1 4.6 2.7 8.1 6.7 12.6 10.3 12.4 10 28.5 9.2 42.4 1.2 6.2-3.5 11.2-7.5 15.9-9 9.9-3.1 17.8-8.6 22.3-15 7.7 30.4 25.7 74.3 37.2 95.7 6.1 11.4 18.3 35.5 23.6 64.6 3.3-.1 7 .4 10.9 1.4 13.8-35.7-11.7-74.2-23.3-84.9-4.7-4.6-4.9-6.6-2.6-6.5 12.6 11.2 29.2 33.7 35.2 59 2.8 11.6 3.3 23.7.4 35.7 16.4 6.8 35.9 17.9 30.7 34.8-2.2-.1-3.2 0-4.2 0 3.2-10.1-3.9-17.6-22.8-26.1-19.6-8.6-36-8.6-38.3 12.5-12.1 4.2-18.3 14.7-21.4 27.3-2.8 11.2-3.6 24.7-4.4 39.9-.5 7.7-3.6 18-6.8 29-32.1 22.9-76.7 32.9-114.3 7.2zm257.4-11.5c-.9 16.8-41.2 19.9-63.2 46.5-13.2 15.7-29.4 24.4-43.6 25.5s-26.5-4.8-33.7-19.3c-4.7-11.1-2.4-23.1 1.1-36.3 3.7-14.2 9.2-28.8 9.9-40.6.8-15.2 1.7-28.5 4.2-38.7 2.6-10.3 6.6-17.2 13.7-21.1.3-.2.7-.3 1-.5.8 13.2 7.3 26.6 18.8 29.5 12.6 3.3 30.7-7.5 38.4-16.3 9-.3 15.7-.9 22.6 5.1 9.9 8.5 7.1 30.3 17.1 41.6 10.6 11.6 14 19.5 13.7 24.6zM173.3 148.7c2 1.9 4.7 4.5 8 7.1 6.6 5.2 15.8 10.6 27.3 10.6 11.6 0 22.5-5.9 31.8-10.8 4.9-2.6 10.9-7 14.8-10.4s5.9-6.3 3.1-6.6-2.6 2.6-6 5.1c-4.4 3.2-9.7 7.4-13.9 9.8-7.4 4.2-19.5 10.2-29.9 10.2s-18.7-4.8-24.9-9.7c-3.1-2.5-5.7-5-7.7-6.9-1.5-1.4-1.9-4.6-4.3-4.9-1.4-.1-1.8 3.7 1.7 6.5z"/></svg></span> Mac OS &amp; linux</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>conda create -n shift python==3.9
conda activate shift
conda install -c conda-forge osmnx
git clone https://github.com/NREL/shift.git
cd shift
pip install -e.
pip install jupyterlab
jupyter lab
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>conda create -n shift python==3.9
conda activate shift
git clone https://github.com/NREL/shift.git
cd shift
pip install -e.
pip install jupyterlab
jupyter lab
</code></pre></div>
</div>
</div>
</div>
</details>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you are using python virtual environment make sure you have 
<code>python 3.9 or greater</code> installed in your system.</p>
</div>
<p>Click on <code>+</code> symbol or Python Kernel to create a Jupyter Notebook.</p>
<div class="admonition success">
<p class="admonition-title">You have sucessfully created an environment.</p>
</div>
<hr />
<h3 id="2-get-all-the-buildings-data-and-create-geometry-object-for-all-buildings"><p style="color:green"> 2. Get all the buildings data and create geometry object for all buildings. </p></h3>
<p>Let's get all the geometries from Chennai, India. Copy and paste the following code 
in your jupyter notebook.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">shift.geometry</span> <span class="kn">import</span> <span class="n">BuildingsFromPlace</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">BuildingsFromPlace</span><span class="p">(</span><span class="s2">&quot;Chennai, India&quot;</span><span class="p">,</span> <span class="n">max_dist</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="n">geometries</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">get_geometries</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total number of buildings: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">geometries</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">+</span>
<span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Sample geometry: </span><span class="si">{</span><span class="n">geometries</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<details>
<summary>Verify the output you are seeing.</summary>
<div class="highlight"><pre><span></span><code>Total number of buildings: 216
Sample geometry: Building( Latitude = 13.081990729184426,  Longitude = 80.27267988235701, Area = 4.81)
</code></pre></div>
</details>
<div class="admonition success">
<p class="admonition-title">You have sucessfully fetched all the buildings.</p>
</div>
<hr />
<h3 id="3-convert-building-geometries-into-load-objects"><p style="color:green"> 3. Convert building geometries into load objects </p></h3>
<p>In order to create power system loads from geometries we need to tell 
how to assign phases, voltages and connection type for loads. In this 
case let's use <code>RandomPhaseAllocator</code> class to allocate phases to all 
geometries. Here we are saying all geometries are of single phase type 
and there are no two phase and three phase loads and finally pass all 
the geometries.</p>
<p>Similarly we initialize simple voltage setter by passing line to line 
voltage of 13.2 kV. <code>DefaultConnSetter</code> class is created which will 
set the connection type to <code>wye</code> for all geometries.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">shift.load_builder</span> <span class="kn">import</span> <span class="p">(</span><span class="n">RandomPhaseAllocator</span><span class="p">,</span> 
                                <span class="n">SimpleVoltageSetter</span><span class="p">,</span> <span class="n">DefaultConnSetter</span><span class="p">)</span>
<span class="n">rpa</span> <span class="o">=</span> <span class="n">RandomPhaseAllocator</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">geometries</span><span class="p">)</span>
<span class="n">svs</span> <span class="o">=</span> <span class="n">SimpleVoltageSetter</span><span class="p">(</span><span class="mf">13.2</span><span class="p">)</span>
<span class="n">dcs</span> <span class="o">=</span> <span class="n">DefaultConnSetter</span><span class="p">()</span>
</code></pre></div>
<p>But wait how do we get power consumption data for the load. In order get consumption 
let's use building area info to get the kw. Let's say we know there is a piecewise 
linear function that relates building area with peak kW consumption.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">area_to_kw_curve</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">18</span><span class="p">),</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">30</span><span class="p">)]</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;Area in meter square&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">area_to_kw_curve</span><span class="p">],</span>
    <span class="s1">&#39;Peak consumption in kW&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">area_to_kw_curve</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;Area in meter square&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;Peak consumption in kW&quot;</span><span class="p">)</span> 
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<details>
<summary>Verify the output you are seeing.</summary>
<p><img alt="" src="../images/tutorial_1_piecewiselinear.png" /></p>
</details>
<p>In order to use this piecewise linear function we can invoke 
<code>PiecewiseBuildingAreaToConsumptionConverter</code> class from load_builder 
and pass it as an argument to build the load. Let's see this class in action.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">shift.load_builder</span> <span class="kn">import</span> <span class="n">PiecewiseBuildingAreaToConsumptionConverter</span>
<span class="n">pbacc</span> <span class="o">=</span> <span class="n">PiecewiseBuildingAreaToConsumptionConverter</span><span class="p">(</span><span class="n">area_to_kw_curve</span><span class="p">)</span>
<span class="n">area</span> <span class="o">=</span> <span class="mi">15</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;For area of </span><span class="si">{</span><span class="n">area</span><span class="si">}</span><span class="s2"> m^2 the consumption would be </span><span class="si">{</span><span class="n">pbacc</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">area</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<details>
<summary>Verify the output you are seeing.</summary>
<div class="highlight"><pre><span></span><code>For area of 15 m^2 the consumption would be 11.5
</code></pre></div>
</details>
<p>Let's build the loads from the geometries and print one them. Here let's try to
build constant power factor of 1.0 type loads for simplicity.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">shift.load_builder</span> <span class="kn">import</span> <span class="n">ConstantPowerFactorBuildingGeometryLoadBuilder</span>
<span class="kn">from</span> <span class="nn">shift.load_builder</span> <span class="kn">import</span> <span class="n">LoadBuilderEngineer</span>
<span class="n">loads</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">geometries</span><span class="p">:</span>
    <span class="n">builder</span> <span class="o">=</span> <span class="n">ConstantPowerFactorBuildingGeometryLoadBuilder</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> 
                            <span class="n">rpa</span><span class="p">,</span> <span class="n">pbacc</span><span class="p">,</span> <span class="n">svs</span><span class="p">,</span> <span class="n">dcs</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">LoadBuilderEngineer</span><span class="p">(</span><span class="n">builder</span><span class="p">)</span>
    <span class="n">loads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">get_load</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">loads</span><span class="p">),</span> <span class="n">loads</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">loads</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</code></pre></div>
<details>
<summary>Verify the output you are seeing.</summary>
<div class="highlight"><pre><span></span><code>216 ConstantPowerFactorLoad(Name = 80.26965403477561_13.083734923972695_load, 
Latitude = 13.083734923972695, Longitude = 80.26965403477561, Phase = Phase.BN 
NumPhase = NumPhase.SINGLE, Connection Type = LoadConnection.STAR, kw = 5.0, 
pf = 1.0, kv = 7.621) ConstantPowerFactorLoad(Name = 80.2680542788762_13.084093574520553_load, 
Latitude = 13.084093574520553, Longitude = 80.2680542788762, Phase = Phase.BN NumPhase = 
NumPhase.SINGLE, Connection Type = LoadConnection.STAR, kw = 5.0, pf = 1.0, kv = 7.621)
</code></pre></div>
</details>
<p>Let's visualize these loads on top of GIS map. That would be cool right ?. 
In order to do that let's invoke two layer distribution network first.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">shift.feeder_network</span> <span class="kn">import</span> <span class="p">(</span><span class="n">SimpleTwoLayerDistributionNetworkBuilder</span><span class="p">,</span> 
                                  <span class="n">TwoLayerNetworkBuilderDirector</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">shift.network_plots</span> <span class="kn">import</span> <span class="n">PlotlyGISNetworkPlot</span>
<span class="kn">from</span> <span class="nn">shift.constants</span> <span class="kn">import</span> <span class="n">PLOTLY_FORMAT_CUSTOMERS_ONLY</span>

<span class="n">network_builder</span> <span class="o">=</span> <span class="n">SimpleTwoLayerDistributionNetworkBuilder</span><span class="p">()</span>
<span class="n">network</span> <span class="o">=</span> <span class="n">TwoLayerNetworkBuilderDirector</span><span class="p">(</span><span class="n">loads</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="n">network_builder</span><span class="p">)</span>

<span class="n">API_KEY</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">PlotlyGISNetworkPlot</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">get_network</span><span class="p">(),</span>
        <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s1">&#39;carto-darkmatter&#39;</span><span class="p">,</span>
        <span class="n">asset_specific_style</span><span class="o">=</span><span class="n">PLOTLY_FORMAT_CUSTOMERS_ONLY</span>
    <span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<details>
<summary>Verify the output you are seeing.</summary>
<p><img alt="" src="../images/tutorial_1_loads.png" /></p>
</details>
<div class="admonition success">
<p class="admonition-title">You have sucessfully converted buildings to power system loads.</p>
</div>
<hr />
<h3 id="4-use-clustering-algorithm-to-cluster-loads"><p style="color:green"> 4. Use clustering algorithm to cluster loads </p></h3>
<p>Next step is to use clustering algorithm to figure out best location for 
positioning distribution transformers. Kmeans clustering is one way of 
doing this. Let's say we want to have 20 disribution transformers for this feeder.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">shift.clustering</span> <span class="kn">import</span> <span class="n">KmeansClustering</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">x_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">load</span><span class="o">.</span><span class="n">longitude</span><span class="p">,</span> <span class="n">load</span><span class="o">.</span><span class="n">latitude</span><span class="p">]</span> 
                    <span class="k">for</span> <span class="n">load</span> <span class="ow">in</span> <span class="n">loads</span><span class="p">])</span>
<span class="n">cluster_</span> <span class="o">=</span> <span class="n">KmeansClustering</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">clusters</span> <span class="o">=</span> <span class="n">cluster_</span><span class="o">.</span><span class="n">get_clusters</span><span class="p">(</span><span class="n">x_array</span><span class="p">)</span>
<span class="n">cluster_</span><span class="o">.</span><span class="n">plot_clusters</span><span class="p">()</span>
</code></pre></div>
<details>
<summary>Verify the output you are seeing.</summary>
<p><img alt="" src="../images/tutorial_1_cluster.png" /></p>
</details>
<div class="admonition success">
<p class="admonition-title">You have sucessfully clustered the load objects.</p>
</div>
<h3 id="5-convert-cluster-center-into-distribution-transformer-objects"><p style="color:green">  5. Convert cluster center into distribution transformer objects </p></h3>
<p>Let's use clustering algorithm to position distribution transformers. 
In order to create transformers from clusters we need to provide list of loads, 
clustering object, kV and connection type for both high tension and low tension 
side of transformers along with number of phase to be used to design transformers. 
The diversity factor function, power factor and adjustment_factor is used to compute 
kVA capacity for the transformer. The catalog is used to find nearest 
transformer capacity.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">shift.transformer_builder</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">ClusteringBasedTransformerLoadMapper</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">shift.enums</span> <span class="kn">import</span> <span class="p">(</span><span class="n">TransformerConnection</span><span class="p">,</span> 
                         <span class="n">NumPhase</span><span class="p">,</span> <span class="n">Phase</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">shift.constants</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">PLOTLY_FORMAT_CUSTOMERS_AND_DIST_TRANSFORMERS_ONLY</span><span class="p">)</span>

<span class="n">trans_builder</span> <span class="o">=</span> <span class="n">ClusteringBasedTransformerLoadMapper</span><span class="p">(</span>
    <span class="n">loads</span><span class="p">,</span>
    <span class="n">clustering_object</span> <span class="o">=</span> <span class="n">cluster_</span><span class="p">,</span>
    <span class="n">diversity_factor_func</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mf">0.3908524</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="mf">1.65180707</span><span class="p">,</span>
    <span class="n">ht_kv</span> <span class="o">=</span> <span class="mf">13.2</span><span class="p">,</span>
    <span class="n">lt_kv</span> <span class="o">=</span> <span class="mf">0.4</span><span class="p">,</span>
    <span class="n">ht_conn</span> <span class="o">=</span> <span class="n">TransformerConnection</span><span class="o">.</span><span class="n">DELTA</span><span class="p">,</span>
    <span class="n">lt_conn</span> <span class="o">=</span> <span class="n">TransformerConnection</span><span class="o">.</span><span class="n">STAR</span><span class="p">,</span>
    <span class="n">ht_phase</span> <span class="o">=</span> <span class="n">Phase</span><span class="o">.</span><span class="n">ABC</span><span class="p">,</span>
    <span class="n">lt_phase</span> <span class="o">=</span> <span class="n">Phase</span><span class="o">.</span><span class="n">ABCN</span><span class="p">,</span>
    <span class="n">num_phase</span> <span class="o">=</span> <span class="n">NumPhase</span><span class="o">.</span><span class="n">THREE</span><span class="p">,</span>
    <span class="n">power_factor</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span>
    <span class="n">adjustment_factor</span><span class="o">=</span><span class="mf">1.15</span>
<span class="p">)</span>
<span class="n">t</span>  <span class="o">=</span> <span class="n">trans_builder</span><span class="o">.</span><span class="n">get_transformer_load_mapping</span><span class="p">()</span>

<span class="n">network</span> <span class="o">=</span> <span class="n">TwoLayerNetworkBuilderDirector</span><span class="p">(</span><span class="n">loads</span><span class="p">,</span> 
            <span class="nb">list</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="p">[],</span> <span class="p">[],</span> <span class="n">network_builder</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">PlotlyGISNetworkPlot</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">get_network</span><span class="p">(),</span>
        <span class="n">API_KEY</span><span class="p">,</span>
        <span class="s1">&#39;carto-darkmatter&#39;</span><span class="p">,</span>
        <span class="n">asset_specific_style</span><span class="o">=</span><span class="n">PLOTLY_FORMAT_CUSTOMERS_AND_DIST_TRANSFORMERS_ONLY</span>
    <span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<details>
<summary>Verify the output you are seeing.</summary>
<p><img alt="" src="../images/tutorial_1_transformers.png" /></p>
</details>
<div class="admonition success">
<p class="admonition-title">You have sucessfully created transformer objects.</p>
</div>
<h3 id="6-get-road-network-and-create-primary-network"><p style="color:green"> 6. Get road network and create primary network </p></h3>
<p>Let's try to get road network from chennai india. We will convert the road 
network to undirected graph and use minimum spanning tree alogorithm to remove any loops. </p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">shift.graph</span> <span class="kn">import</span> <span class="n">RoadNetworkFromPlace</span>
<span class="kn">from</span> <span class="nn">shift.constants</span> <span class="kn">import</span> <span class="n">PLOTLY_FORMAT_SIMPLE_NETWORK</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">RoadNetworkFromPlace</span><span class="p">(</span><span class="s1">&#39;chennai, india&#39;</span><span class="p">,</span> <span class="n">max_dist</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">get_network</span><span class="p">()</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">PlotlyGISNetworkPlot</span><span class="p">(</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">updated_network</span><span class="p">,</span>
            <span class="n">API_KEY</span><span class="p">,</span>
            <span class="s1">&#39;carto-darkmatter&#39;</span><span class="p">,</span>
            <span class="n">asset_specific_style</span><span class="o">=</span><span class="n">PLOTLY_FORMAT_SIMPLE_NETWORK</span>
        <span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<details>
<summary>Verify the output you are seeing.</summary>
<p><img alt="" src="../images/tutorial_1_road_network.png" /></p>
</details>
<p>Let's create an instance of Primary Network Builder class and visulaize the generated network.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">shift.primary_network_builder</span> <span class="kn">import</span> <span class="n">PrimaryNetworkFromRoad</span>
<span class="n">pnet</span> <span class="o">=</span> <span class="n">PrimaryNetworkFromRoad</span><span class="p">(</span>
        <span class="n">graph</span><span class="p">,</span>
        <span class="n">t</span><span class="p">,</span>
        <span class="p">(</span><span class="mf">80.2786311</span><span class="p">,</span> <span class="mf">13.091658</span><span class="p">),</span>
        <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mf">0.3908524</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="mf">1.65180707</span><span class="p">,</span>
        <span class="mf">13.2</span><span class="p">,</span>
        <span class="mi">100</span>
    <span class="p">)</span>
<span class="n">pnet</span><span class="o">.</span><span class="n">update_network_with_ampacity</span><span class="p">()</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">PlotlyGISNetworkPlot</span><span class="p">(</span>
            <span class="n">pnet</span><span class="o">.</span><span class="n">get_primary_network</span><span class="p">(),</span>
            <span class="n">API_KEY</span><span class="p">,</span>
            <span class="s1">&#39;carto-darkmatter&#39;</span><span class="p">,</span>
            <span class="n">asset_specific_style</span><span class="o">=</span><span class="n">PLOTLY_FORMAT_SIMPLE_NETWORK</span>
        <span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<details>
<summary>Verify the output you are seeing.</summary>
<p><img alt="" src="../images/tutorial_1_primary_network.png" /></p>
</details>
<div class="admonition success">
<p class="admonition-title">You have sucessfully fetched road network and created primary network.</p>
</div>
<h3 id="7-convert-primary-network-into-list-of-primary-line-sections"><p style="color:green"> 7. Convert primary network into list of primary line sections </p></h3>
<p>Let's take above primary network and convert it into primary line sections.
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">shift.primary_network_builder</span> <span class="kn">import</span> <span class="n">PrimarySectionsBuilder</span>
<span class="kn">from</span> <span class="nn">shift.enums</span> <span class="kn">import</span> <span class="n">ConductorType</span><span class="p">,</span> <span class="n">NumPhase</span>
<span class="kn">from</span> <span class="nn">shift.line_section</span> <span class="kn">import</span> <span class="n">HorizontalThreePhaseConfiguration</span>
<span class="kn">from</span> <span class="nn">shift.feeder_network</span> <span class="kn">import</span> <span class="n">update_transformer_locations</span>
<span class="n">psections</span> <span class="o">=</span> <span class="n">PrimarySectionsBuilder</span><span class="p">(</span>
    <span class="n">pnet</span><span class="o">.</span><span class="n">get_network</span><span class="p">(),</span>
    <span class="n">ConductorType</span><span class="o">.</span><span class="n">OVERHEAD</span><span class="p">,</span>
    <span class="p">{</span><span class="n">NumPhase</span><span class="o">.</span><span class="n">THREE</span><span class="p">:</span> <span class="n">HorizontalThreePhaseConfiguration</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="s2">&quot;m&quot;</span><span class="p">)},</span>
    <span class="n">NumPhase</span><span class="o">.</span><span class="n">THREE</span><span class="p">,</span>
    <span class="n">Phase</span><span class="o">.</span><span class="n">ABC</span><span class="p">,</span>
    <span class="kc">False</span><span class="p">,</span>
    <span class="n">material</span><span class="o">=</span><span class="s2">&quot;ACSR&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">longest_length</span> <span class="o">=</span> <span class="n">pnet</span><span class="o">.</span><span class="n">get_longest_length_in_kvameter</span><span class="p">()</span> <span class="o">/</span> <span class="mf">1609.34</span>
<span class="n">k_drop</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="n">longest_length</span><span class="p">)</span>
<span class="n">l_sections</span> <span class="o">=</span> <span class="n">psections</span><span class="o">.</span><span class="n">generate_primary_line_sections</span><span class="p">(</span><span class="n">k_drop</span><span class="p">,</span> <span class="mf">11.0</span><span class="p">)</span>
<span class="n">r_nodes</span> <span class="o">=</span> <span class="n">pnet</span><span class="o">.</span><span class="n">get_trans_node_mapping</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">psections</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</code></pre></div></p>
<details>
<summary>Verify the output you are seeing.</summary>
<div class="admonition note">
<p class="admonition-title">The output may not be exactly the same which is okay as long as you are seeing something similar.</p>
</div>
<div class="highlight"><pre><span></span><code>GeometryBasedLine(Name = 80.2696283_13.0829503_node__80.2697735_13.08341_node, 
FromNode = 80.2696283_13.0829503_node, ToNode = 80.2697735_13.08341_node, Length = 
53.2391782199997 NumPhase = NumPhase.THREE, Length unit = m,  Geometry = OverheadLineGeometry(Name = 475b3162-f00e-4652-be27-cbf953c2b104_linegeometry, NumPhase = NumPhase.THREE, Number of conductors 
= 3, Configuration = &lt;shift.line_section.HorizontalThreePhaseConfiguration object at 0x000001DFDC312610&gt;, 
Phase wire = Wire(Name = 6_6/1_ACSR, Resistance unit = mi, GMR unit = ft, Radius unit = in, AC resistance (ohm per) 
= 3.98, Diameter = 0.198, GMR AC = 0.00394, Ampacity = 100)))
</code></pre></div>
</details>
<div class="admonition success">
<p class="admonition-title">You have sucessfully created primary line sections.</p>
</div>
<h3 id="8-update-transformer-objects-to-use-nearest-primary-node-from-primary-network"><p style="color:green"> 8. Update transformer objects to use nearest primary node from primary network </p></h3>
<p>After creating primary network we need to connect transformers to the primary network. To do this we 
can simply call <code>update_transformer_locations</code> function.</p>
<div class="highlight"><pre><span></span><code><span class="n">t</span> <span class="o">=</span> <span class="n">update_transformer_locations</span><span class="p">(</span><span class="n">r_nodes</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">l_sections</span><span class="p">)</span>
</code></pre></div>
<div class="admonition success">
<p class="admonition-title">You have sucessfully updated transformer locations. </p>
</div>
<h3 id="9-develop-secondary-network-and-line-sections-for-all-transformer-objects"><p style="color:green">  9. Develop secondary network and line sections for all transformer objects </p></h3>
<p>Let's take each transformer and it's load and convert it into secondary network. </p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">shift.secondary_network_builder</span> <span class="kn">import</span> <span class="p">(</span><span class="n">SecondaryNetworkBuilder</span><span class="p">,</span> 
    <span class="n">SecondarySectionsBuilder</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">shift.line_section</span> <span class="kn">import</span> <span class="p">(</span><span class="n">HorizontalThreePhaseNeutralConfiguration</span><span class="p">,</span> 
    <span class="n">HorizontalSinglePhaseConfiguration</span><span class="p">)</span>
<span class="n">s_sections</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">load_to_node_mapping_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">trans</span><span class="p">,</span> <span class="n">cust_list</span> <span class="ow">in</span> <span class="n">t</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">sn</span> <span class="o">=</span> <span class="n">SecondaryNetworkBuilder</span><span class="p">(</span><span class="n">cust_list</span><span class="p">,</span> <span class="n">trans</span><span class="p">,</span> 
        <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mf">0.3908524</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="mf">1.65180707</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;_secondary_</span><span class="si">{</span><span class="n">counter</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">sn</span><span class="o">.</span><span class="n">update_network_with_ampacity</span><span class="p">()</span>
    <span class="n">load_to_node_mapping_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">sn</span><span class="o">.</span><span class="n">get_load_to_node_mapping</span><span class="p">())</span>
    <span class="n">k_drop</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">/</span> <span class="p">(</span><span class="mi">200</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">sc</span> <span class="o">=</span> <span class="n">SecondarySectionsBuilder</span><span class="p">(</span>
        <span class="n">sn</span><span class="o">.</span><span class="n">get_network</span><span class="p">(),</span>
        <span class="n">ConductorType</span><span class="o">.</span><span class="n">OVERHEAD</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="n">NumPhase</span><span class="o">.</span><span class="n">THREE</span><span class="p">:</span> <span class="n">HorizontalThreePhaseNeutralConfiguration</span><span class="p">(</span>
                <span class="mi">9</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">9.4</span><span class="p">,</span> <span class="s2">&quot;m&quot;</span>
            <span class="p">)</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="n">NumPhase</span><span class="o">.</span><span class="n">SINGLE</span><span class="p">:</span> <span class="n">HorizontalSinglePhaseConfiguration</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="s2">&quot;m&quot;</span><span class="p">),</span>
        <span class="p">},</span>
        <span class="n">NumPhase</span><span class="o">.</span><span class="n">THREE</span><span class="p">,</span>
        <span class="n">Phase</span><span class="o">.</span><span class="n">ABCN</span><span class="p">,</span>
        <span class="kc">True</span><span class="p">,</span>
        <span class="n">material</span><span class="o">=</span><span class="s2">&quot;ACSR&quot;</span>
    <span class="p">)</span>
    <span class="n">s_sections</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">sc</span><span class="o">.</span><span class="n">generate_secondary_line_sections</span><span class="p">(</span><span class="n">k_drop</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">))</span>
    <span class="n">counter</span> <span class="o">+=</span><span class="mi">1</span>
</code></pre></div>
<details>
<summary>Verify the output you are seeing.</summary>
<p><img alt="" src="../images/tutorial_1_secondary_network.png" /></p>
</details>
<div class="admonition success">
<p class="admonition-title">You have sucessfully created secondary line sections and network. </p>
</div>
<h3 id="10-create-a-substation-transformer-object"><p style="color:green"> 10. Create a substation transformer object </p></h3>
<p>Finally let's create a substation transformer.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">shift.transformer_builder</span> <span class="kn">import</span> <span class="n">SingleTransformerBuilder</span>
<span class="n">s_node</span> <span class="o">=</span> <span class="n">pnet</span><span class="o">.</span><span class="n">substation_node</span>
<span class="n">s_coords</span> <span class="o">=</span> <span class="n">pnet</span><span class="o">.</span><span class="n">substation_coords</span>
<span class="n">sub_trans_builder</span> <span class="o">=</span> <span class="n">SingleTransformerBuilder</span><span class="p">(</span>
    <span class="n">loads</span><span class="p">,</span>
    <span class="n">s_coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="n">s_coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="n">diversity_factor_func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mf">0.3908524</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="mf">1.65180707</span><span class="p">,</span>
    <span class="n">ht_kv</span><span class="o">=</span><span class="mi">33</span><span class="p">,</span>
    <span class="n">lt_kv</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span>
    <span class="n">ht_conn</span><span class="o">=</span><span class="n">TransformerConnection</span><span class="o">.</span><span class="n">DELTA</span><span class="p">,</span>
    <span class="n">lt_conn</span><span class="o">=</span><span class="n">TransformerConnection</span><span class="o">.</span><span class="n">STAR</span><span class="p">,</span>
    <span class="n">ht_phase</span><span class="o">=</span><span class="n">Phase</span><span class="o">.</span><span class="n">ABC</span><span class="p">,</span>
    <span class="n">lt_phase</span><span class="o">=</span><span class="n">Phase</span><span class="o">.</span><span class="n">ABCN</span><span class="p">,</span>
    <span class="n">num_phase</span><span class="o">=</span><span class="n">NumPhase</span><span class="o">.</span><span class="n">THREE</span><span class="p">,</span>
    <span class="n">power_factor</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span>
    <span class="n">adjustment_factor</span><span class="o">=</span><span class="mf">1.15</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">st</span> <span class="o">=</span> <span class="n">sub_trans_builder</span><span class="o">.</span><span class="n">get_transformer_load_mapping</span><span class="p">()</span>
</code></pre></div>
<div class="admonition success">
<p class="admonition-title">You have sucessfully created substation transformer. </p>
</div>
<h3 id="11-export-opendss-model"><p style="color:green"> 11. Export OpenDSS model </p></h3>
<p>Let's export distribution model in OpenDSS format.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">shift.exporter.opendss</span> <span class="kn">import</span> <span class="p">(</span>
<span class="n">ConstantPowerFactorLoadWriter</span><span class="p">,</span>
<span class="n">TwoWindingSimpleTransformerWriter</span><span class="p">,</span>
<span class="n">GeometryBasedLineWriter</span><span class="p">,</span>
<span class="n">OpenDSSExporter</span>
<span class="p">)</span>
<span class="n">lw</span> <span class="o">=</span> <span class="n">ConstantPowerFactorLoadWriter</span><span class="p">(</span>
    <span class="n">loads</span><span class="p">,</span> <span class="n">load_to_node_mapping_dict</span><span class="p">,</span> <span class="s2">&quot;loads.dss&quot;</span>
<span class="p">)</span>
<span class="n">tw</span> <span class="o">=</span> <span class="n">TwoWindingSimpleTransformerWriter</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s2">&quot;dist_xfmrs.dss&quot;</span><span class="p">)</span>
<span class="n">stw</span> <span class="o">=</span> <span class="n">TwoWindingSimpleTransformerWriter</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s2">&quot;sub_trans.dss&quot;</span><span class="p">)</span>
<span class="n">sw</span> <span class="o">=</span> <span class="n">GeometryBasedLineWriter</span><span class="p">(</span>
    <span class="n">l_sections</span> <span class="o">+</span> <span class="n">s_sections</span><span class="p">,</span>
    <span class="n">line_file_name</span><span class="o">=</span><span class="s2">&quot;lines.dss&quot;</span><span class="p">,</span>
    <span class="n">geometry_file_name</span><span class="o">=</span><span class="s2">&quot;line_geometry.dss&quot;</span><span class="p">,</span>
    <span class="n">wire_file_name</span><span class="o">=</span><span class="s2">&quot;wiredata.dss&quot;</span><span class="p">,</span>
    <span class="n">cable_file_name</span><span class="o">=</span><span class="s2">&quot;cabledata.dss&quot;</span><span class="p">,</span>
<span class="p">)</span>


<span class="n">dw</span> <span class="o">=</span> <span class="n">OpenDSSExporter</span><span class="p">(</span>
    <span class="p">[</span><span class="n">tw</span><span class="p">,</span> <span class="n">stw</span><span class="p">,</span> <span class="n">sw</span><span class="p">,</span> <span class="n">lw</span><span class="p">],</span>
    <span class="sa">r</span><span class="s2">&quot;C:\Users\KDUWADI\Desktop\NREL_Projects\shift_output&quot;</span><span class="p">,</span>
    <span class="s2">&quot;master.dss&quot;</span><span class="p">,</span>
    <span class="s2">&quot;chennai&quot;</span><span class="p">,</span>
    <span class="mf">33.0</span><span class="p">,</span>
    <span class="mi">50</span><span class="p">,</span>
    <span class="n">Phase</span><span class="o">.</span><span class="n">ABCN</span><span class="p">,</span>
    <span class="n">NumPhase</span><span class="o">.</span><span class="n">THREE</span><span class="p">,</span>
    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">s_node</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">s_node</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">_htnode&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">11.0</span><span class="p">,</span> <span class="mf">33.0</span><span class="p">],</span>
<span class="p">)</span>
<span class="n">dw</span><span class="o">.</span><span class="n">export</span><span class="p">()</span>
</code></pre></div>
<div class="admonition success">
<p class="admonition-title">You have sucessfully created substation transformer. </p>
</div>

              
            </article>
            
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Welcome" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Welcome
            </div>
          </div>
        </a>
      
      
        
        <a href="../how-to-guides/" class="md-footer__link md-footer__link--next" aria-label="Next: How to Guides" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              How to Guides
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["search.suggest", "sarch.highlight", "content.tabs.link", "content.code.annotate"], "search": "../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/1.33.1/plotly.min.js"></script>
      
    
  </body>
</html>